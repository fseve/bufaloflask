{% extends 'layout.html' %}

{% block headblock %}
  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="{{url_for('static', filename='plugins/fontawesome-free/css/all.min.css')}}">
  <!-- SweetAlert2 -->
  <link rel="stylesheet" href="{{url_for('static', filename='plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css')}}">
  <!-- Toastr -->
  <link rel="stylesheet" href="{{url_for('static', filename='plugins/toastr/toastr.min.css')}}">
  <!-- Theme style -->
  <link rel="stylesheet" href="{{url_for('static', filename='dist/css/adminlte.min.css')}}">
{% endblock %}

{% block contentblock %}
  <div class="content-wrapper contenedor">
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1></h1>
          </div>
          <!-- <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">Blank Page</li>
            </ol>
          </div> -->
        </div>
      </div>
    </section>

    <section class="content">

      <div class="card">
        <div class="card-header">
          <h3 class="card-title"></h3>

          <div class="card-tools">
            <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
              <i class="fas fa-minus"></i>
            </button>
          </div>
        </div>
        <div class="card-body">

          <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title">Crear usuario</h3>
            </div>
            <form action="" method="post">
              {{ form.csrf_token }}
              <div class="card-body">
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="correo">Correo electrónico</label>
                      {{ form.correo(class_="form-control") }}
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="password">Contraseña</label>
                      {{ form.password(class_="form-control") }}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="nombres">Nombres</label>
                      {{ form.nombres(class_="form-control") }}
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="apellidos">Apellidos</label>
                      {{ form.apellidos(class_="form-control") }}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="edad">Edad</label>
                      {{ form.edad(class_="form-control") }}
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="genero">Género</label>
                      {{ form.genero(class_="form-control") }}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="cargo">Cargo</label>
                      {{ form.cargo(class_="form-control") }}
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="fechaIngreso">Fecha de ingreso</label>
                      {{ form.fechaIngreso(class_="form-control") }}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="tipoContrato">Tipo de contrato</label>
                      {{ form.tipoContrato(class_="form-control") }}
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="fechaTerminoContrato">Fecha término contrato</label>
                      {{ form.fechaTerminoContrato(class_="form-control") }}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="dependencia">Dependencia</label>
                      {{ form.dependencia(class_="form-control") }}
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="salario">Salario</label>
                      {{ form.salario(class_="form-control") }}
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="rol">Rol</label>
                      {{ form.rol(class_="form-control") }}
                    </div>
                  </div>
                </div>
              </div>

              <div class="card-footer">
                <button type="submit" class="btn btn-primary float-right">Guardar</button>
                <a class="btn btn-primary float-left" href="{{'/usuarios/listar'}}">Volver</a>
              </div>
            </form>
          </div>

        </div>
      </div>

    </section>
  </div>
{% endblock %}

{% block scriptsblock %}
  <!-- jQuery -->
  <script src="{{url_for('static', filename='plugins/jquery/jquery.min.js')}}"></script>
  <!-- Bootstrap 4 -->
  <script src="{{url_for('static', filename='plugins/bootstrap/js/bootstrap.bundle.min.js')}}"></script>
  <!-- SweetAlert2 -->
  <script src="{{url_for('static', filename='plugins/sweetalert2/sweetalert2.min.js')}}"></script>
  <!-- Toastr -->
  <script src="{{url_for('static', filename='plugins/toastr/toastr.min.js')}}"></script>
  <!-- AdminLTE App -->
  <script src="{{url_for('static', filename='dist/js/adminlte.min.js')}}"></script>
  <!-- AdminLTE for demo purposes -->
  <script src="{{url_for('static', filename='dist/js/demo.js')}}"></script>

  <script>
    document.querySelector('#salario').addEventListener('keypress', function (e) {
      const allowedChars = '0123456789';
      function contains(stringValue, charValue) {
        return stringValue.indexOf(charValue) > -1;
      }
      var invalidKey = e.key.length === 1 && !contains(allowedChars, e.key) || e.key === '.' && contains(e.target.value, '.');
      invalidKey && e.preventDefault();
    });
    document.querySelector('#edad').addEventListener('keypress', function (e) {
      const allowedChars = '0123456789';
      function contains(stringValue, charValue) {
        return stringValue.indexOf(charValue) > -1;
      }
      var invalidKey = e.key.length === 1 && !contains(allowedChars, e.key) || e.key === '.' && contains(e.target.value, '.');
      invalidKey && e.preventDefault();
    });
  </script>

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      {% for message in messages %}
        <script type="text/javascript">
          const Toast = Swal.mixin({
            toast: true,
            position: 'center',
            showConfirmButton: false,
            timer: 3000
          });

          let mensajeMostrar = '';
          mensajeMostrar = '{{ message | safe }}'
          if (mensajeMostrar) {
            Toast.fire({
              icon: 'error',
              title: mensajeMostrar
            })
          }
        </script>
      {% endfor %}
    {% endif %}
  {% endwith %}

{% endblock %}
